!function(e){function webpackJsonpCallback(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,_=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&_.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(n&&n(t);_.length;)_.shift()();return s.push.apply(s,l||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,o=1;o<a.length;o++){var n=a[o];0!==r[n]&&(i=!1)}i&&(s.splice(t--,1),e=__webpack_require__(__webpack_require__.s=a[0]))}return e}var t={},r={6:0,1:0},s=[];function __webpack_require__(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)__webpack_require__.d(r,s,function(t){return e[t]}.bind(null,s));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/assets/";var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=webpackJsonpCallback,a=a.slice();for(var o=0;o<a.length;o++)webpackJsonpCallback(a[o]);var n=i;s.push([45,0,2]),checkDeferredModules()}({11:function(e,t,r){"use strict";r.d(t,"a",(function(){return initGlobalScripts}));var s=r(7),a=r.n(s),i=r(5),o=r.n(i),n=r(2),c=r.n(n),l=function burgerToogler(){var e=this;o()(this,burgerToogler),c()(this,"toogle",(function(){for(var t=0,r=Object.entries(e.tooglers);t<r.length;t++){var s=a()(r[t],2),i=s[0],o=s[1];document.querySelector(i).classList.toggle(o)}})),this.tooglers={".menu__btn":"menu__btn_active",".header__popup":"header__popup_show",body:"lock__scroll"},document.querySelector(".menu__btn").onclick=this.toogle},u=function searchToogler(){var e=this;o()(this,searchToogler),c()(this,"show",(function(){for(var t=0,r=Object.entries(e.tooglers);t<r.length;t++){var s=a()(r[t],2),i=s[0],o=s[1];document.querySelector(i).classList.add(o)}})),c()(this,"close",(function(){for(var t=0,r=Object.entries(e.tooglers);t<r.length;t++){var s=a()(r[t],2),i=s[0],o=s[1];document.querySelector(i).classList.remove(o)}})),this.tooglers={".search__box":"active",".input__search":"input__active",".search__btn":"search__btn_active",".cancel__btn":"cancel__btn_active",".phone":"phone__hidden",".profile":"profile__hidden",".nav":"nav__hidden"},document.querySelector(".search__btn").onclick=this.show,document.querySelector(".cancel__btn").onclick=this.close},_=function mobileSearchToogler(){var e=this;o()(this,mobileSearchToogler),c()(this,"show",(function(){for(var t=0,r=Object.entries(e.tooglers);t<r.length;t++){var s=a()(r[t],2),i=s[0],o=s[1];document.querySelector(i).classList.add(o)}})),c()(this,"close",(function(){for(var t=0,r=Object.entries(e.tooglers);t<r.length;t++){var s=a()(r[t],2),i=s[0],o=s[1];document.querySelector(i).classList.remove(o)}})),this.tooglers={".search__box_mobile":"active",".input__search_mobile":"input__active",".search__btn_mobile":"search__btn_active",".cancel__btn_mobile":"cancel__btn_active",".block__first":"block__first_hidden",".mobile__block":"mobile__block_active",".block__second":"block__second_active"},document.querySelector(".search__btn_mobile").onclick=this.show,document.querySelector(".cancel__btn_mobile").onclick=this.close},d=r(15),p=r.n(d),g=r(9),Layoutvue_type_template_id_190e3f8b_scoped_true_lang_pug_render=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.$root.hidden?e._e():r("div",{staticClass:"modal-login js-modal-login"},[r("div",{staticClass:"registration"},["login"==e.mode?r("div",{staticClass:"registration__wrapper"},[r("a",{staticClass:"js-close",attrs:{id:"close_btn_avtorisation"},on:{click:function(t){return e.$root.toggle()}}},[r("svg",{staticClass:"registration__close"},[r("use",{attrs:{href:"/assets/icons/icons.svg#close"}})])]),r("div",{staticClass:"registration__tilte"},[e._v("Введите E-mail и пароль для входа")]),r("div",{staticClass:"registration__inner"},[r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label phone"},[e._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"registration__input phone",domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label phone"},[e._v("Пароль")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"registration__input password",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("br"),e.isValidMail?e._e():r("pre",{staticClass:"registration__error"},[e._v("Неверно введен email")])]),r("div",{staticClass:"forget_password",on:{click:function(t){return e.switchMode("restore")}}},[e._v("Забыли пароль?")]),r("div",{staticClass:"go_to_registration",on:{click:function(t){return e.switchMode("registration")}}},[e._v("Зарегистрироваться")])]),r("button",{staticClass:"registration__btn button",attrs:{disabled:!e.isValidMail},on:{click:e.login}},[e._v("Войти")])]):"request"==e.mode?r("div",{staticClass:"login__wrapper"},[r("a",{staticClass:"js-close",attrs:{id:"close_btn_avtorisation"},on:{click:function(t){return e.$root.toggle()}}},[r("svg",{staticClass:"registration__close"},[r("use",{attrs:{href:"/assets/icons/icons.svg#close"}})])]),r("div",{staticClass:"registration__tilte"},[e._v("Введите новый пароль")]),r("div",{staticClass:"registration__inner"},[r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label password"},[e._v("Пароль")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"registration__input password",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label password"},[e._v("Подтверждение пароля")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.verifiedPassword,expression:"verifiedPassword"}],staticClass:"registration__input password",attrs:{type:"password"},domProps:{value:e.verifiedPassword},on:{input:function(t){t.target.composing||(e.verifiedPassword=t.target.value)}}}),e.equal?e._e():r("pre",{staticClass:"registration__error"},[e._v("Пароли не совпадают")]),r("br"),e.isValidPass?e._e():r("pre",{staticClass:"registration__error"},[e._v("Пароль должен содержать буквы и цифры")])]),r("button",{staticClass:"registration__btn button",attrs:{disabled:!e.isValidPass||!e.agree||!e.equal},on:{click:e.changePassword}},[e._v("Сохранить")])])]):"registration"==e.mode?r("div",{staticClass:"login__wrapper"},[r("a",{staticClass:"js-close",attrs:{id:"close_btn_avtorisation"},on:{click:function(t){return e.$root.toggle()}}},[r("svg",{staticClass:"registration__close"},[r("use",{attrs:{href:"/assets/icons/icons.svg#close"}})])]),r("div",{staticClass:"registration__tilte"},[e._v("Регистрация")]),r("div",{staticClass:"registration__inner"},[r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label email"},[e._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"registration__input email",domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label password"},[e._v("Пароль")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"registration__input password",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label password"},[e._v("Подтверждение пароля")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.verifiedPassword,expression:"verifiedPassword"}],staticClass:"registration__input password",attrs:{type:"password"},domProps:{value:e.verifiedPassword},on:{input:function(t){t.target.composing||(e.verifiedPassword=t.target.value)}}}),e.equal?e._e():r("pre",{staticClass:"registration__error"},[e._v("Пароли не совпадают")]),r("br"),e.isValidPass?e._e():r("pre",{staticClass:"registration__error"},[e._v("Пароль должен содержать буквы и цифры")])]),r("div",{staticClass:"registration__agreement"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.agree,expression:"agree"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.agree)?e._i(e.agree,null)>-1:e.agree},on:{change:function(t){var r=e.agree,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,null);s.checked?i<0&&(e.agree=r.concat([null])):i>-1&&(e.agree=r.slice(0,i).concat(r.slice(i+1)))}else e.agree=a}}}),r("div",{staticClass:"registration__agreement-text"},[e._v("Cогласие на обработку персональных данных "),r("br"),r("span",[e._v("Политика конфиденциональности")])])]),r("a",{staticClass:"go_to_registration",on:{click:function(t){return e.switchMode("login")}}},[e._v("К авторизации")]),r("button",{staticClass:"registration__btn button",attrs:{disabled:!(e.isValidMail&&e.isValidPass&&e.agree&&e.equal)},on:{click:e.register}},[e._v("Зарегистрироваться")])])]):"info"==e.mode?r("div",{staticClass:"login__wrapper"},[r("a",{staticClass:"js-close",attrs:{id:"close_btn_avtorisation"},on:{click:function(t){return e.$root.toggle()}}},[r("svg",{staticClass:"registration__close"},[r("use",{attrs:{href:"/assets/icons/icons.svg#close"}})])]),r("div",{staticClass:"login__tilte"},[e._v("Подтвердите E-mail")]),r("div",{staticClass:"registration__inner"},[r("div",{staticClass:"registration__label email"},[e._v("На Вашу почту выслан код с подтверждением")])])]):"restore"==e.mode?r("div",{staticClass:"login__wrapper"},[r("a",{staticClass:"js-close",attrs:{id:"close_btn_avtorisation"},on:{click:function(t){return e.$root.toggle()}}},[r("svg",{staticClass:"registration__close"},[r("use",{attrs:{href:"/assets/icons/icons.svg#close"}})])]),r("div",{staticClass:"login__tilte"},[e._v("Введите E-mail")]),r("div",{staticClass:"registration__inner"},[r("div",{staticClass:"registration__item"},[r("div",{staticClass:"registration__label email"},[e._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"registration__input email",domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.isValidMail?e._e():r("pre",{staticClass:"registration__error"},[e._v("Неверно введен email")])]),r("a",{staticClass:"go_to_registration",on:{click:function(t){return e.switchMode("login")}}},[e._v("К авторизации")]),r("button",{staticClass:"registration__btn button",class:{disabled:!e.isValidMail},on:{click:e.requestRestore}},[e._v("Восстановление")])])]):e._e()])])])};Layoutvue_type_template_id_190e3f8b_scoped_true_lang_pug_render._withStripped=!0;var v=r(0),f=r.n(v),m=r(1),h=r.n(m),b=r(16),w=r.n(b),k=r(17),y=r.n(k),C=r(12),x=r.n(C),P=r(18);function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,s=x()(e);if(t){var a=x()(this).constructor;r=Reflect.construct(s,arguments,a)}else r=s.apply(this,arguments);return y()(this,r)}}Error;var O=r(14),j=r.n(O),S=r(19),q=r.n(S);r(20);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={theme:"custom",layout:"topRight",type:"information",text:"",timeout:5e3,progressBar:!0,closeWith:["click","button"]},L={};function noty_noty(){var e=["alert","success","warning","error","information"],t=["top","topLeft","topCenter","topRight","center","centerLeft","centerRight","bottom","bottomLeft","bottomCenter","bottomRight"];Object.values(arguments).forEach((function(r){switch(j()(r)){case"object":L=r;break;case"number":M.timeout=r;break;case"string":e.some((function(e){return e===r}))?M.type=r:"warn"===r?M.type="warning":"info"===r?M.type="information":t.some((function(e){return e===r}))?M.layout=r:M.text=r;break;case"boolean":M.progressBar=r}}));var r=_objectSpread(_objectSpread({},M),L);return new q.a(r).show()}var N={components:{},props:{},data:function data(){return{id:null,restoreToken:null,email:"",password:"",verifiedPassword:"",mode:"login",agree:!1,isError:!1,modes:{login:"Вход",registration:"Регистрация",loading:"Загрузка",info:"Подтверждение email",success:"Подтверждение email",request:"Подтверждение email",restore:"Восстановление пароля"}}},computed:{isValidMail:function isValidMail(){return this.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},isValidPass:function isValidPass(){return this.password.match(/(?=.*[0-9])[0-9a-zA-Z!@#$%^&*]{6,}/g)},equal:function equal(){return this.password===this.verifiedPassword&&0!=this.password.length},caption:function caption(){return this.modes[this.mode]}},methods:{switchMode:function switchMode(e){this.mode=e},closeSuccessfully:function closeSuccessfully(){this.$emit("toggle"),this.email="",this.password="",this.verifiedPassword="",this.switchMode("login")},register:function register(){var e=this;return h()(f.a.mark((function _callee(){var t;return f.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("api/auth/basic/register",{method:"POST",body:JSON.stringify({email:e.email,password:e.password})});case 3:if(!(t=r.sent).ok){r.next=8;break}e.switchMode("info"),r.next=12;break;case 8:return r.next=10,t.json();case 10:throw result=r.sent,result.errors[0].message;case 12:r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),noty_noty("error","string"==typeof r.t0?r.t0:"Неизвестная ошибка");case 18:case"end":return r.stop()}}),_callee,null,[[0,14]])})))()},login:function login(){var e=this;return h()(f.a.mark((function _callee2(){var t,r;return f.a.wrap((function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:return t=null,s.prev=1,s.next=4,fetch("api/auth/basic/login",{method:"POST",body:JSON.stringify({email:e.email,password:e.password})});case 4:if(!(r=s.sent).ok){s.next=14;break}return s.next=8,r.json();case 8:t=s.sent,localStorage.setItem("jwt",JSON.stringify(t)),e.closeSuccessfully(),document.location.href="/lk",s.next=18;break;case 14:return s.next=16,r.json();case 16:throw(t=s.sent).errors[0].message;case 18:s.next=24;break;case 20:s.prev=20,s.t0=s.catch(1),noty_noty("error","string"==typeof s.t0?s.t0:"Ошибка авторизации");case 24:case"end":return s.stop()}}),_callee2,null,[[1,20]])})))()},changePassword:function changePassword(){var e=this;return h()(f.a.mark((function _callee3(){var t;return f.a.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("/api/auth/basic/restore",{method:"POST",body:JSON.stringify({token:e.restoreToken,id:e.id,password:e.password})});case 3:if(!(t=r.sent).ok){r.next=9;break}e.switchMode("login"),noty_noty("success","Пароль успешно изменен"),r.next=13;break;case 9:return r.next=11,t.json();case 11:throw result=r.sent,result.errors[0].message;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),noty_noty("error","string"==typeof r.t0?r.t0:"Неизвестная ошибка");case 19:case"end":return r.stop()}}),_callee3,null,[[0,15]])})))()},requestRestore:function requestRestore(){var e=this;return h()(f.a.mark((function _callee4(){var t;return f.a.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("/api/auth/basic/restore/request",{method:"POST",body:JSON.stringify({email:e.email})});case 3:if(!(t=r.sent).ok){r.next=8;break}e.switchMode("info"),r.next=12;break;case 8:return r.next=10,t.json();case 10:throw result=r.sent,result.errors[0].message;case 12:r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),noty_noty("error","string"==typeof r.t0?r.t0:"Неизвестная ошибка");case 18:case"end":return r.stop()}}),_callee4,null,[[0,14]])})))()}},watch:{},mounted:function mounted(){},created:function created(){var e=this;return h()(f.a.mark((function _callee5(){var t,r,s,a,i,o;return f.a.wrap((function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:if(t=new URL(window.location.href).searchParams,r=t.get("mode"),s=t.get("token"),a=t.get("id"),null,s&&a&&r){n.next=9;break}return n.abrupt("return");case 9:if(!localStorage.getItem("jwt")){n.next=12;break}return noty_noty("error","Ошибка"),n.abrupt("return");case 12:if(e.mode="loading","confirm"!=r){n.next=35;break}return n.prev=14,n.next=17,fetch("/api/auth/basic/confirm",{method:"POST",body:JSON.stringify({token:s,id:a})});case 17:if(!(i=n.sent).ok){n.next=23;break}e.switchMode("login"),noty_noty("success","Учетная запись успешно активирована"),n.next=27;break;case 23:return n.next=25,i.json();case 25:throw n.sent.errors[0].message;case 27:n.next=33;break;case 29:n.prev=29,n.t0=n.catch(14),noty_noty("error","string"==typeof n.t0?n.t0:"Неизвестная ошибка");case 33:n.next=56;break;case 35:if("restore"!=r){n.next=56;break}return n.prev=36,n.next=39,fetch("/api/auth/basic/valid",{method:"POST",body:JSON.stringify({token:s,id:a})});case 39:if(!(o=n.sent).ok){n.next=46;break}e.switchMode("restore"),e.restoreToken=s,e.id=a,n.next=50;break;case 46:return n.next=48,o.json();case 48:throw n.sent.errors[0].message;case 50:n.next=56;break;case 52:n.prev=52,n.t1=n.catch(36),noty_noty("error","string"==typeof n.t1?n.t1:"Неизвестная ошибка");case 56:case"end":return n.stop()}}),_callee5,null,[[14,29],[36,52]])})))()}},T=r(8),E=Object(T.a)(N,Layoutvue_type_template_id_190e3f8b_scoped_true_lang_pug_render,[],!1,null,"190e3f8b",null);E.options.__file="src/vue/ModalLogin/Layout.vue";var $=E.exports,R=function(){function LoginModal(){o()(this,LoginModal);var e=document.getElementById("modal-login"),t=e.dataset.agreePageLink;this.vmLoginModal=new g.a({name:"LoginModal",data:{hidden:!0},el:e,methods:{toggle:function toggle(){this.hidden=!this.hidden,document.body.classList.toggle("no-scroll")}},render:function render(e){return e($,{props:{agreePageLink:t}})}}),this.token=JSON.parse(localStorage.getItem("jwt")),this.loginBtn=document.querySelector(".js-login-btn"),this.init()}return p()(LoginModal,[{key:"init",value:function init(){var e=this;this.loginBtn&&this.loginBtn.addEventListener("click",(function(){e.handleLoginClick()}))}},{key:"handleLoginClick",value:function handleLoginClick(){if(this.token&&"accessToken"in this.token){var e=document.createElement("a");e.href="/lk",e.click()}else this.vmLoginModal.toggle()}},{key:"toggle",value:function toggle(){this.vmLoginModal.toggle()}}]),LoginModal}();function initGlobalScripts(){new l,new u,new _,new R}},45:function(e,t,r){"use strict";r.r(t);var s=r(11),a=r(50),i=r(48),o=r(49);r(24);document.addEventListener("DOMContentLoaded",(function(){Object(s.a)()})),a.a.use([i.a,o.a]);new a.a(".location__slider",{slidesPerView:1,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},scrollbar:{el:".swiper-scrollbar"}})}});